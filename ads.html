<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>広告動画再生</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        margin: 0;
        background-color: #c1c1c1;
        font-family: sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
      }
      circle {
        fill: none;
        stroke-width: 4;
      }
      svg {
        position: absolute;
        transform: rotate(-90deg);
      }
    </style>
  </head>

  <body>
    <div class="w-100 h-100 position-relative">
      <div
        class="position-absolute text-white fs-3"
        style="display: none; top: 50px; right: 10px; cursor: pointer"
        id="close-icon"
      >
        X
      </div>
      <iframe
        id="ytplayer"
        class="w-100 h-100"
        frameborder="0"
        allowfullscreen
        controls="1"
      ></iframe>
      <div
        class="position-absolute text-center w-100"
        style="bottom: 100px; display: none"
        id="couponBtn"
      >
        <button
          class="bg-primary text-white p-3 rounded-pill"
          onclick="alert('クーポンコード: ZONEFREE2025')"
        >
          クーポンコードをゲット
        </button>
      </div>
      <div
        class="position-absolute justify-content-center align-items-center fs-3"
        style="bottom: 200px; width: 40px; right: 10px; display: none"
        id="countdownRing"
      >
        <svg width="48" height="48">
          <circle style="stroke: #c1c1c1" cx="24" cy="24" r="20"></circle>
          <circle
            id="progress"
            style="
              stroke: #ffffff;
              stroke-dasharray: 220;
              stroke-dashoffset: 0;
              transition: stroke-dashoffset 1s linear;
            "
            cx="24"
            cy="24"
            r="20"
          ></circle>
        </svg>
        <div
          class="position-absolute fw-bold text-white fs-6"
          id="countdownText"
        >
          15
        </div>
      </div>
    </div>

    <script type="module">
      import { closeVideo, handleYouTubeIframeAPI } from "/script.js";

      const tag = document.createElement("script");
      tag.src = "https://www.youtube.com/iframe_api";
      document.body.appendChild(tag);

      window.onYouTubeIframeAPIReady = () => {
        handleYouTubeIframeAPI();
      };

      const closeIcon = document.getElementById("close-icon");
      closeIcon.addEventListener("click", () => {
        closeVideo();
      });
    </script>
  </body>
</html>
